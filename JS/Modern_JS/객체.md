# chap 4. 객체: 기본

대괄호 표기법은 점 표기법과 다르게 

object[key], object.key

key가 런타임 환경에서 평가돼서 코드를 유연하게 작성할 수 있다.

대괄호 표기법이 이름과 값의 제약을 없애주기 때문에 점 표기법보다 강력하다. 하지만 번거롭기 때문에 프로퍼티 이름이 처음에 확정되고 단순하면 점표기법을 사용하고 복잡한 상황으로 변경되어 가면서 대괄호 표기법으로 변경된다.

### 객체의 정렬방식

정수 프로퍼티일 경우엔 자동으로 정렬되고, 그외엔 추가 순서대로 정렬된다.

정수 프로퍼티란 변형없이 정수에서 왔다 갔다 할 수 있는 문자열 (’+49’, ‘1.2’ 이런건 안됨)


### 참조에 의한 객체복사

객체는 참조에 의해 할당되고 복사된다.

변수엔 객체 자체가 아닌 메모리상의 주소인 참조가 저장된다.

따라서 객체가 할당된 변수를 복사하거나 함수의 인자로 넘길 땐 객체가 아닌 객체의 참조가 복사된다.


### 가비지 컬렉션의 기준

reachability를 기준으로 삭제할지 말지 정한다.

자바스크립트 엔진내에서 끊임없이 가비지 컬렉터가 동작하면서 모든 객체들을 모니터링하면서 도달할 수 없는 객체들을 삭제한다.

### 가비지 컬렉션 내부 알고리즘: mark-and-sweep

- 루트정보를 수집하고 mark합니다.
- 루트가 참조하고 있는 객체를 방문하고 마크하고 반복합니다.
- 마크되어 있지 않은 객체를 삭제한다.

### 최적화 기법

- generational collection (세대별 수집)
- incremental collection (점진적 수집)
- idle-time collection (유휴 시간 수집)

### 메서드와 this

this는 런타임에 결정된다. (일반함수, dot notation, method, binding)

### new 연산자와 생성자 함수

new.target을 사용하면 new 연산자를 사용했는지 아닌지 알 수 있다.

생성자 함수는 new와 함께 호출되면서 내부에 this가 암시적으로 만들어지고 this가 반환된다.

### 생성자와 return문

생성자 함수는 보통 return문이 없고, 반환해야될 것들은 this에 저장되고 this는 자동으로 반환되기 때문에 반환문을 명시적으로 써 줄 필요가 없습니다.

만약 return문을 쓴다면

- 객체를 반환한다면 this 대신 객체가 반환된다.
- 원시형을 반환한다면 무시되고 this가 반환됨.

하지만 일반적으론 생성자함수에는 return문이 거의 없다.

괄호를 생략해도 생성자 함수는 정상 작동하지만 좋은 스타일은 아니다.
